{"version":3,"sources":["meteor://ðŸ’»app/lib/methods/matter.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/lib/methods/matter.js","sourcesContent":["\"use strict\";\n/*global $ : false */\n/*global Router : false */\n/*global Meteor : false */\n/*global Matters : false */\n\nMeteor.methods({\n\tmatterCreator : function(matter, button){\n\t\tif (! Meteor.userId()) {\n\t\t\treturn new Meteor.Error(\"not-authorized\");\n\t\t}\n\t\tthis.unblock();\n\n\t\tvar matterId = Matters.insert(matter);\n\t\t\n\t\tif(this.isSimulation){\n\t\t\t$(button)\n\t\t\t.removeClass(\"btn-primary\")\n\t\t\t.addClass(\"btn-success\");\n\t\t\tRouter.go(\"matter.index\");\n\t\t}\n\t\treturn matterId;\n\t},\n\tmatterDestroyer: function (matterId) {\n\t\tif (! Meteor.userId()) {\n\t\t\treturn new Meteor.Error(\"not-authorized\");\n\t\t}\n\t\tthis.unblock();\n\t\treturn Matters.remove(matterId);\n\t},\n\tmatterUpdator : function(matterId, matter, button){\n\t\tif (! Meteor.userId()) {\n\t\t\treturn new Meteor.Error(\"not-authorized\");\n\t\t}\n\t\tthis.unblock();\n\t\t\n\t\tMatters.update(matterId, matter);\n\n\t\tif(this.isSimulation){\n\t\t\t$(button)\n\t\t\t.removeClass(\"btn-primary\")\n\t\t\t.addClass(\"btn-success\");\n\t\t\tRouter.go(\"matter.index\");\n\t\t}\n\t\treturn true;\n\t},\n\taddOriginToMatter : function(matterId, ref){\n\t\tif (! Meteor.userId()) {\n\t\t\treturn new Meteor.Error(\"not-authorized\");\n\t\t}\n\t\tthis.unblock();\n\t\tOrigins.insert({\n\t\t\tref : ref,\n\t\t\tmatter : matterId\n\t\t});\n\n\t\treturn true;\n\t},\n\tmatterOriginsTransfert : function(data){\n\t\tif (! Meteor.userId()) {\n\t\t\treturn new Meteor.Error(\"not-authorized\");\n\t\t}\n\t\tthis.unblock();\n\t\t\n\t\tif(!data.originId)return false;\n\t\tMoves.insert({\n\t\t\tworkId : data.workId,\n\t\t\toriginId : data.originId,\n\t\t\tdestinyId : data.destinyId,\n\t\t\tdateTime : data.dateTime,\n\t\t\tquantity : data.quantity\n\t\t});\n\t}\n});"]}