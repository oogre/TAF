{"version":3,"sources":["meteor://ðŸ’»app/client/templates/work/view-action.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/client/templates/work/view-action.js","sourcesContent":["\"use strict\";\n/*global $ : false */\n\n/*global Works : false */\n/*global Router : false */\n/*global Meteor : false */\n/*global moment : false */\n/*global Session : false */\n/*global console : false */\n/*global Template : false */\n\nTemplate[\"work-viewaction\"].helpers({\n\treopenable : function(){\n\t\tif(Meteor.isChief()){\n\t\t\tvar work = Works.findOne(this._id);\n\t\t\t//if( !work || !work.signatures || !work.signatures.client || !work.signatures.adf){\n\t\t\t\t\n\t\t\t//}\n\t\t\treturn true;\n\t\t}\n\t\tSession.set(Meteor.FILL_CONTEXT_MENU_KEY, false);\n\t\treturn false;\n\t}\n});\n\nTemplate[\"work-viewaction\"].events({\n\t\"click .workClose\" : function(){\n\t\tvar workId = $(\"[data-work-id]\").first().attr(\"data-work-id\");\n\t\tMeteor.call(\"workCloser\", workId, moment().toISOString(), function(error){\n\t\t\tif(error) return console.log(error);\n\t\t\tSession.set(Meteor.CONTEXT_MENU_KEY, false);\n\t\t\tRouter.go(\"work.show\", {workId : workId});\n\t\t});\n\t\treturn false;\n\t},\n\t\"click .workReopen\" : function(){\n\t\tvar workId = $(\"[data-work-id]\").first().attr(\"data-work-id\");\n\t\tMeteor.call(\"workReopener\", workId, function(error){\n\t\t\tif(error) return console.log(error);\n\t\t\tSession.set(Meteor.CONTEXT_MENU_KEY, false);\n\t\t\tRouter.go(\"work.show\", {workId : workId});\n\t\t});\n\t\treturn false;\n\t},\n\t\n\t\"click .print\" : function(){\n\t\tvar workId = $(\"[data-work-id]\").first().attr(\"data-work-id\");\n\t\tif(this.type == \"entretien\"){\n\t\t\tMeteor.call(\"maintenanceToPdf\", workId, function(err, file){\n\t\t\t\tif(err)console.error(err);\n\t\t\t\telse window.open(file);\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tMeteor.call(\"workToPdf\", workId, function(err, file){\n\t\t\t\tif(err)console.error(err);\n\t\t\t\telse window.open(file);\n\t\t\t});\n\t\t}\n\t\treturn false;\n\t}\n\n});"]}