{"version":3,"sources":["meteor://ðŸ’»app/client/templates/shop/view.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/client/templates/shop/view.js","sourcesContent":["\"use strict\";\n/*global _ : false */\n/*global Modules : false */\n/*global Template : false */\n\n\nTemplate.shopview.created = function(){\n\tSession.set(Meteor.LIST_CALENDAR_SWITCHER, true);\n}\nTemplate.shopview.rendered = function(){\n\t\n}\nTemplate.shopview.destroyed = function(){\n\tSession.set(Meteor.LIST_CALENDAR_SWITCHER, false);\t\n}\n\nTemplate.shopview.events({\n\t\"click .workToPdf\" : function(event){\n\t\tvar workId = $(event.target).attr(\"data-work-id\");\n\n\t\tMeteor.call(\"workToPdf\", workId, function(err, file){\n\t\t\tif(err)console.error(err);\n\t\t\telse window.open(file);\n\t\t});\n\t},\n\t\"click .maintenanceToPdf\" : function(event){\n\t\tvar workId = $(event.target).attr(\"data-work-id\");\n\t\tMeteor.call(\"maintenanceToPdf\", workId, function(err, file){\n\t\t\tif(err)console.error(err);\n\t\t\telse window.open(file);\n\t\t});\n\t},\n});\n\n\nfunction timeDistToZone(timeInSeconds){\n\tvar timeDist = 2 * Math.ceil(timeInSeconds / 900) * 900;\n\ttimeDist = moment.duration(timeDist , \"seconds\");\n\tvar hours = Math.floor(timeDist.asHours());\n\tvar min = (timeDist.minutes() / 60)  * 100;\n\treturn timeInSeconds ? hours+\".\"+min : \"\";\n};\n\nTemplate.shopview.helpers({\n\tzone : function(){\n\t\treturn \" Zone : \"+ timeDistToZone(this.shop.timeDist);\n\t},\n\tlocation : function(){\n\t\treturn this.shop.location;\n\t},\n\tmodules : function(){\n\t\tif(this.shop.modules){\n\t\t\treturn\t_\n\t\t\t\t\t.chain(\n\t\t\t\t\t\tthis.shop.modules\n\t\t\t\t\t)\n\t\t\t\t\t.groupBy(function(module){\n\t\t\t\t\t\tif(module)\n\t\t\t\t\t\t\treturn module.type;\n\t\t\t\t\t})\n\t\t\t\t\t.map(function(modules,key){\n\t\t\t\t\t\tif(modules)\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: key, \n\t\t\t\t\t\t\t\tmodules: modules.map(function(module){\n\t\t\t\t\t\t\t\t\tmodule.view = true;\n\t\t\t\t\t\t\t\t\treturn module;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.sortBy(function(modules){\n\t\t\t\t\t\tif(modules)\n\t\t\t\t\t\t\treturn modules.type;\n\t\t\t\t\t})\n\t\t\t\t\t.value();\n\t\t}\n\t}\n});"]}