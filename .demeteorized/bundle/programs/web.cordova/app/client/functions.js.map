{"version":3,"sources":["meteor://ðŸ’»app/client/functions.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E","file":"/client/functions.js","sourcesContent":["\"use strict\";\n/*global _ : false */\n/*global Meteor : false */\n/*global google : false */\n\nMeteor.routing = function(originLocation, destinationLocation, next){\n\tvar origin      = new google.maps.LatLng(originLocation.lat,originLocation.lng);\n\tvar destination = new google.maps.LatLng(destinationLocation.lat,destinationLocation.lng);\n\tif(origin && destination){\n\t\tvar request = {\n\t\t\torigin      : origin,\n\t\t\tdestination : destination,\n\t\t\ttravelMode  : google.maps.DirectionsTravelMode.DRIVING // Type de transport\n\t\t};\n\t\tvar directionsService = new google.maps.DirectionsService(); // Service de calcul d'itinÃ©raire\n\t\tdirectionsService.route(request, function(response, status){ // Envoie de la requÃªte pour calculer le parcours\n\t\t\tif(status == google.maps.DirectionsStatus.OK){\n\t\t\t\treturn next(null, response);\n\t\t\t}else{\n\t\t\t\treturn next(new Meteor.Error(status));\n\t\t\t}\n\t\t});\n\t}else{\n\t\treturn next(new Meteor.Error(\"originLocation/destinationLocation failed\"));\n\t}\n};\n\nMeteor.getLocation = function(next){\n\tif (navigator.geolocation) {\n\t\tnavigator.geolocation.getCurrentPosition(function showPosition(position) {\n\t\t\treturn next(null, {\n\t\t\t\tlat : position.coords.latitude,\n\t\t\t\tlng : position.coords.longitude\n\t\t\t});\n\t\t});\n\t}else{\n\t\treturn next(null, Meteor.QG.location);\n\t}\n};\n\n\nMeteor.watchLocation = function(next){\n\tif (navigator.geolocation) {\n\t\treturn navigator.geolocation.watchPosition(function showPosition(position) {\n\t\t\tnext(null, new google.maps.LatLng(position.coords.latitude, position.coords.longitude));\n\t\t});\n\t}\n\telse{\n\t\tnext(new Meteor.Error(\"location failed\"));\n\t}\n};\n\nMeteor.b64toBlob = function(b64, onsuccess, onerror) {\n\tvar img = new Image();\n\timg.onerror = onerror;\n\timg.onload = function onload() {\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tcanvas.width = img.width;\n\t\tcanvas.height = img.height;\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\t\tcanvas.toBlob(onsuccess);\n\t};\n\timg.src = b64;\n};\n\n_.isJson = function(str) {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n};"]}