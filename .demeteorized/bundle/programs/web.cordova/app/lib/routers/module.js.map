{"version":3,"sources":["meteor://ðŸ’»app/lib/routers/module.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/lib/routers/module.js","sourcesContent":["/* MODULES */\n\nRouter.route(\"/module/new\", {\n\tcontroller : \"ApplicationController\",\n\tname: \"module.new\",\n\taction : function () {\n\t\tSession.set(Meteor.PAGE_TITLE, \"Nouveau Module\");\n\t\tthis.render(\"modulenew\");\n\t}\n});\n\n\n\nRouter.route(\"/module/edit/:moduleId\", {\n\tcontroller : \"ApplicationController\",\n\tname: \"module.edit\",\n\tdata : function(){\n\t\treturn Modules.findOne(this.params.moduleId);\n\t},\n\taction : function () {\n\t\tvar data = this.data();\n\t\tif(data){\n\t\t\tSession.set(Meteor.PAGE_TITLE, \"Edition du module : \"+s.capitalize(data.name)+\" - \"+s.capitalize(data.type));\t\n\t\t}\n\t\tthis.render(\"moduleedit\");\n\t}\n});\n\n\n\nRouter.route(\"/module\", {\n\tcontroller : \"CleanController\",\n\tname: \"module.index\",\n\tdata : function(){\n\t\treturn {\n\t\t\tmodules : \t_\n\t\t\t\t\t\t.chain(Modules.find().fetch())\n\t\t\t\t\t\t.groupBy(function(module){\n\t\t\t\t\t\t\treturn module.type;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map(function(val,key){\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: key, \n\t\t\t\t\t\t\t\tmodules: val\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.sortBy(function(Modules){\n\t\t\t\t\t\t\treturn Modules.type;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.value()\n\t\t};\n\t},\n\taction : function () {\n\t\tSession.set(Meteor.PAGE_TITLE, \"Liste des Modules\");\n\t\tthis.render(\"moduleindex\");\n\t\tif(Meteor.isBoss()){\n\t\t\tSession.set(Meteor.FILL_CONTEXT_MENU_KEY, true);\n\t\t\tthis.render(\"moduleaction\", {to : \"action\"}); //contextmenu.action\n\t\t}\n\t}\n});"]}