{"version":3,"sources":["meteor://üíªapp/lib/routers/task.js"],"names":[],"mappings":"uBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/lib/routers/task.js","sourcesContent":["/* TASKS */\n\nRouter.route(\"/task/new\", {\n\tcontroller : \"ApplicationController\",\n\tname: \"task.new\",\n\taction : function () {\n\t\tSession.set(Meteor.PAGE_TITLE, \"Nouvelle t√¢che\");\n\t\tthis.render(\"tasknew\");\n\t}\n});\n\n\n\nRouter.route(\"/task\", {\n\tcontroller : \"CleanController\",\n\tname: \"task.index\",\n\tdata : function(){\n\t\treturn {\n\t\t\ttasks : _\n\t\t\t\t\t.chain(Tasks.find().fetch())\n\t\t\t\t\t.groupBy(function(task){\n\t\t\t\t\t\treturn task.moduletype;\n\t\t\t\t\t})\n\t\t\t\t\t.map(function(tasks){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcategory : tasks[0].moduletype || \"-\",\n\t\t\t\t\t\t\ttasks : tasks\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.sortBy(function(task){\n\t\t\t\t\t\treturn task.category;\n\t\t\t\t\t})\n\t\t\t\t\t.value()\n\t\t};\n\t},\n\taction : function () {\n\t\tSession.set(Meteor.PAGE_TITLE, \"Liste des t√¢ches\");\n\t\tthis.render(\"taskindex\");\n\t\tif(Meteor.isBoss()){\n\t\t\tSession.set(Meteor.FILL_CONTEXT_MENU_KEY, true);\n\t\t\tthis.render(\"taskaction\", {to : \"action\"}); //contextmenu.action\n\t\t}\n\t}\n});\n\n\n\nRouter.route(\"/task/edit/:taskId\", {\n\tcontroller : \"ApplicationController\",\n\tname: \"task.edit\",\n\tdata : function(){\n\t\treturn Tasks.findOne(this.params.taskId);\n\t},\n\taction : function () {\n\t\tvar data = this.data();\n\t\tif(data){\n\t\t\tSession.set(Meteor.TASK_INPUT_TEXT, data.value);\n\t\t\tSession.set(Meteor.PAGE_TITLE, \"Edition de la t√¢che : \"+s.capitalize(data.name));\n\t\t}\n\t\tthis.render(\"taskedit\");\n\t}\n});"]}