{"version":3,"sources":["meteor://ðŸ’»app/server/pdf/pdfkit.config.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E","file":"/server/pdf/pdfkit.config.js","sourcesContent":["\"use strict\";\n/*global Meteor : false */\n/*global process : false */\n\nMeteor.pdfkitConfig = {\n\tparam : {\n\t\tfilename : \"default.pdf\",\n\t\tpage : {\n\t\t\tsize : \"A4\",\n\t\t\tmargins : {\n\t\t\t\tleft : 15,\n\t\t\t\ttop : 15,\n\t\t\t\tright : 15,\n\t\t\t\tbottom : 15\n\t\t\t},\n\t\t\tcolomn : 7\n\t\t},\n\t\tline : {\n\t\t\theight : 9,\n\t\t\tpadding : 2,\n\t\t\tmargin : 5\n\t\t},\n\t\tstroke : {\n\t\t\tbold : 2,\n\t\t\tthin : 0.2\n\t\t},\n\t\tfill : {\n\t\t\tgrey : \"#dedede\",\n\t\t\tblack : \"#000000\"\n\t\t},\n\t\tfonts : [{\n\t\t\t\tname : \"DejaVuSans\",\n\t\t\t\tfile : process.env.PWD + \"/programs/web.browser/app/fonts/dejavu/DejaVuSans.ttf\"\n\t\t\t},{\n\t\t\t\tname : \"DejaVuSans-Bold\",\n\t\t\t\tfile : process.env.PWD + \"/programs/web.browser/app/fonts/dejavu/DejaVuSans-Bold.ttf\"\n\t\t\t},{\n\t\t\t\tname : \"DejaVuSansMono\",\n\t\t\t\tfile : process.env.PWD + \"/programs/web.browser/app/fonts/dejavu/DejaVuSansMono.ttf\"\n\t\t\t},{\n\t\t\t\tname : \"DejaVuSansMono-Bold\",\n\t\t\t\tfile : process.env.PWD + \"/programs/web.browser/app/fonts/dejavu/DejaVuSansMono-Bold.ttf\"\n\t\t\t}]\n\t},\n\ttemplates : function(pdf){\n\t\treturn \tpdf\n\t\t\t\t.template(\"header\", function(doc, data){\n\t\t\t\t\tvar x = doc.param.page.margins.left;\n\t\t\t\t\tvar y = doc.param.page.margins.top;\n\t\t\t\t\tvar h = 75;\n\t\t\t\t\tdoc.image(data, x, y, {height: h});\n\t\t\t\t\tdoc.oogre.position = [x, y+h];\n\t\t\t\t})\n\t\t\t\t.template(\"row\", function(doc, data){\n\t\t\t\t\t/*if(doc.oogre.hasToNextPage()){\n\t\t\t\t\t\tdoc.oogre.addPage(data.hasToAddPage);\n\t\t\t\t\t}*/\n\t\t\t\t\tvar prev = 0;\n\t\t\t\t\tdata.x = data.x||doc.param.page.margins.left;\n\t\t\t\t\tdata.y = data.y||doc.y;\n\n\t\t\t\t\t(data.content||[]).map(function(content){\n\t\t\t\t\t\tdoc.x = data.x + (prev * doc.oogre.colWidth);\n\t\t\t\t\t\tdoc.y = data.y;\n\t\t\t\t\t\t\n\t\t\t\t\t\tpdf.template(\"cel\", content);\n\n\t\t\t\t\t\tprev += content.size;\n\t\t\t\t\t});\n\t\t\t\t\tvar line = Math.ceil((doc.y-data.y)/(doc.param.line.height+doc.param.line.padding));\n\t\t\t\t\tdoc.x = data.x;\n\t\t\t\t\tdoc.y = data.y += (line * (doc.param.line.height+doc.param.line.padding));\n\t\t\t\t})\n\t\t\t\t.template(\"cel\", function(doc, data){\n\t\t\t\t\tvar _width = parseInt(data.size) * doc.oogre.colWidth;\n\t\t\t\t\tvar _tmpY = doc.y;\n\t\t\t\t\tdoc\n\t\t\t\t\t.fill(doc.param.fill.black)\n\t\t\t\t\t.fontSize(8);\n\t\t\t\t\t(data.text || [])\n\t\t\t\t\t.map(function(txt){\n\t\t\t\t\t\tif(txt.folio){\n\t\t\t\t\t\t\tdoc.oogre.setGet(\"folio\", {\n\t\t\t\t\t\t\t\tposition : {\n\t\t\t\t\t\t\t\t\tx : doc.x,\n\t\t\t\t\t\t\t\t\ty : doc.y\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\twidth : _width,\n\t\t\t\t\t\t\t\talign : txt.align\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(txt.align === \"center\"){\n\t\t\t\t\t\t\ttxt.value.split(/<b>|<\\/b>/)\n\t\t\t\t\t\t\t.map(function(t, key){\n\t\t\t\t\t\t\t\tif(key%2===0){\n\t\t\t\t\t\t\t\t\tdoc\n\t\t\t\t\t\t\t\t\t.font(\"DejaVuSans\");\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tdoc\n\t\t\t\t\t\t\t\t\t.font(\"DejaVuSans-Bold\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdoc.y --;\n\t\t\t\t\t\t\t\tdoc.text(t, {\n\t\t\t\t\t\t\t\t\twidth : _width,\n\t\t\t\t\t\t\t\t\talign: txt.align\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tdoc.x += doc.param.line.padding;\n\t\t\t\t\t\t\ttxt.value.split(/<b>|<\\/b>/)\n\t\t\t\t\t\t\t.map(function(t, key){\n\t\t\t\t\t\t\t\tif(key%2===0){\n\t\t\t\t\t\t\t\t\tdoc\n\t\t\t\t\t\t\t\t\t.font(\"DejaVuSans\");\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tdoc\n\t\t\t\t\t\t\t\t\t.font(\"DejaVuSans-Bold\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdoc.y --;\n\t\t\t\t\t\t\t\tdoc.text(t);\n\t\t\t\t\t\t\t\tdoc.y = _tmpY;\n\t\t\t\t\t\t\t\tdoc.x -= doc.param.line.padding;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(data.image){\n\t\t\t\t\t\tvar _tmpX = doc.x;\n\t\t\t\t\t\t_tmpY = doc.y;\n\t\t\t\t\t\t(data.image || [])\n\t\t\t\t\t\t.map(function(image){\n\t\t\t\t\t\t\tif(data.size){\n\t\t\t\t\t\t\t\tdoc.image(image.src, doc.x, doc.y, {fit:[150, 100]});\n\t\t\t\t\t\t\t\tdoc.x += (_width + 5);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tdoc.image(image.src, doc.x, doc.y, {fit:[100, 100]});\n\t\t\t\t\t\t\t\tdoc.x += 110;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdoc.y = _tmpY;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdoc.x = _tmpX;\n\t\t\t\t\t\tdoc.y += 110;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar line = Math.ceil((doc.y-_tmpY)/(doc.param.line.height+doc.param.line.padding));\n\t\t\t\t\tif(data.border!==false){\n\t\t\t\t\t\tdoc\n\t\t\t\t\t\t.lineWidth(doc.param.stroke.thin)\n\t\t\t\t\t\t.rect(\tdoc.x, \n\t\t\t\t\t\t\t\t_tmpY - doc.param.line.padding, \n\t\t\t\t\t\t\t\t_width, \n\t\t\t\t\t\t\t\tline * (doc.param.line.height+doc.param.line.padding))\n\t\t\t\t\t\t.stroke();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.template(\"table\", function(doc, data){\n\t\t\t\t\tconsole.log(\"TABLE\");\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.template(\"footer\", function(doc, data){\n\t\t\t\t\tdata = {\n\t\t\t\t\t\tx : doc.param.page.margins.left,\n\t\t\t\t\t\ty : doc.page.height - doc.page.margins.bottom - 50,\n\t\t\t\t\t\tcontent : data\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tdoc\n\t\t\t\t\t.moveTo(data.x, data.y)\n\t\t\t\t\t.lineWidth(doc.param.stroke.bold)\n\t\t\t\t\t.lineTo(data.x+doc.oogre.usedWidth, data.y)\n\t\t\t\t\t.stroke();\n\n\t\t\t\t\tdata.y += doc.param.line.margin;\n\t\t\t\t\tpdf.template(\"row\", data);\n\t\t\t\t})\n\t\t\t\t.template(\"title\", function(doc, data){\n\t\t\t\t\tdata = {\n\t\t\t\t\t\tx : doc.oogre.position[0],\n\t\t\t\t\t\ty : doc.oogre.position[1]+15,\n\t\t\t\t\t\tcontent : data\n\t\t\t\t\t};\n\n\t\t\t\t\tdoc\n\t\t\t\t\t.lineWidth(doc.param.stroke.thin)\n\t\t\t\t\t.rect(\tdata.x, \n\t\t\t\t\t\t\tdata.y - doc.param.line.padding, \n\t\t\t\t\t\t\tdoc.oogre.usedWidth, \n\t\t\t\t\t\t\tdoc.param.line.height+doc.param.line.padding )\n\t\t\t\t\t.fill(doc.param.fill.grey)\n\t\t\t\t\t.stroke();\n\t\t\t\t\t\n\t\t\t\t\tpdf.template(\"row\", data);\n\t\t\t\t\tdoc.y += doc.param.line.margin;\n\t\t\t\t})\n\t\t\t\t.template(\"newSection\", function(doc, data){\n\t\t\t\t\tdata.x = data.x||doc.param.page.margins.left;\n\t\t\t\t\tdata.y = data.y||doc.y;\n\n\t\t\t\t\tdoc.y += doc.param.line.margin;\n\t\t\t\t\tdoc\n\t\t\t\t\t.moveTo(doc.x, doc.y)\n\t\t\t\t\t.lineWidth(doc.param.stroke.bold)\n\t\t\t\t\t.lineTo(data.x+doc.oogre.usedWidth, doc.y)\n\t\t\t\t\t.stroke();\n\t\t\t\t\tdoc.y += doc.param.stroke.bold;\n\t\t\t\t});\n\n\t}\n\n};"]}