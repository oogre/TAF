{"version":3,"sources":["meteor://üíªapp/server/pdf/methods.work.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/server/pdf/methods.work.js","sourcesContent":["\"use strict\";\n/*global _ : false */\n/*global s : false */\n/*global Npm : false */\n/*global Works : false */\n/*global Wikis : false */\n/*global Shops : false */\n/*global Meteor : false */\n/*global moment : false */\n/*global Workers : false */\n/*global process : false */\n\n\n// meteor run android-device --mobile-server http://ogre.local:3000\n\nMeteor.methods({\n\n\tworkToPdf : function(workId){\n\t\tthis.unblock();\n\n\t\tvar Future = Npm.require(\"fibers/future\");\n\t\tvar myFuture = new Future();\n\t\t\n\t\tvar currentUser = Meteor.user();\n\t\tvar work = Works.findOne(workId);\n\t\tif(!work){\n\t\t\treturn false;\n\t\t}\n\n\t\tvar shop = Shops.findOne(work.shop._id);\n\t\tif(!shop){\n\t\t\treturn false;\n\t\t}\n\t\tvar dest = process.env.PWD + \"/.uploads/pdf/\";\n\t\tvar filename = shop.brand.replace(\" \", \"-\") + \"/\" + moment().format(\"YYYY-MM-DD\") + \"-\" + workId + \".pdf\";\n\n\t\tvar fs = Npm.require(\"fs\");\t\t\n\t\tif (fs.existsSync(dest+filename)) {\n\t\t\treturn \"/upload/pdf/\"+filename;\n\t\t}\n\n\t\tvar wikis = Wikis.find({\n\t\t\t_id : {\n\t\t\t\t$in : (work.wikis || [])\n\t\t\t}\n\t\t}).fetch();\n\t\t\n\t\tvar pictures = Picts.find({\n\t\t\t_id : {\n\t\t\t\t$in : (work.pictures || [])\n\t\t\t}\n\t\t}).fetch();\n\t\t\n\t\twork.workers = Workers.find({\n\t\t\t_id : {\n\t\t\t\t$in : _.keys(work.schedular)\n\t\t\t}\n\t\t}).fetch();\n\t\t\n\t\twork.workers = work.workers.map(function(worker){\n\t\t\tworker.schedular = work.schedular[worker._id];\n\t\t\treturn worker;\n\t\t});\n\n\t\tMeteor.pdfkitConfig.param.filename = filename; \n\t\tMeteor.pdfkitConfig.param.dest = dest; \n\n\t\tvar pdf = new Meteor.pdfkit(Meteor.pdfkitConfig.param);\n\n\t\tpdf = Meteor.pdfkitConfig.templates(pdf);\n\t\tpdf\n\t\t.template(\"header\", process.env.PWD+\"/programs/web.browser/app/images/adf-logo.png\")\n\t\t.template(\"footer\", [{\n\t\t\tsize : 1.75,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"left\",\n\t\t\t\t\tvalue : \"<b>Atelier</b>\\n\\nrue des technologies 2ter\\nB-4432 Alleur\"\n\t\t\t\t}],\n\t\t\t\tborder : false,\n\t\t\t},{\n\t\t\t\tsize : 1.75,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"left\",\n\t\t\t\t\tvalue : \"<b>T√©l√©phone & Fax</b>\\n\\nFixe : 04 366.13.18\\nFax : 04 239.20.89\"\n\t\t\t\t}],\n\t\t\t\tborder : false,\n\t\t\t},{\n\t\t\t\tsize : 1.75,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"left\",\n\t\t\t\t\tvalue : \"<b>Service Technique</b>\\n\\n1er : 0495.51.43.09\\n2nd : 0495.48.68.96\"\n\t\t\t\t}],\n\t\t\t\tborder : false,\n\t\t\t},{\n\t\t\t\tsize : 1.75,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"left\",\n\t\t\t\t\tvalue : \"<b>Internet</b>\\n\\nMail : info@atelierdufroid.be\\nSite : www.atelierdufroid.be\"\n\t\t\t\t}],\n\t\t\t\tborder : false,\n\t\t\t}\n\t\t])\n\t\t.template(\"title\", [{\n\t\t\t\tsize : 1,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"center\",\n\t\t\t\t\tvalue : \"/\",\n\t\t\t\t\tfolio : true\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\tsize : 4,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"center\",\n\t\t\t\t\tvalue : \"Fiche de travail : \" + work.type\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tsize : 2,\n\t\t\t\ttext : [{\n\t\t\t\t\talign : \"center\",\n\t\t\t\t\tvalue : work._id\n\t\t\t\t}]\n\t\t\t}\n\t\t])\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\tsize :4, \n\t\t\t\ttext : [{ \n\t\t\t\t\talign : \"left\",\n\t\t\t\t\tvalue : \"Client : \"\n\t\t\t\t},{\n\t\t\t\t\talign : \"center\",\n\t\t\t\t\tvalue : s(shop.name+\" - \"+shop.brand).titleize()\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\tsize : 3,\n\t\t\t\ttext : [{ \n\t\t\t\t\talign : \"left\",\n\t\t\t\t\tvalue : \"Date rapport : \"\n\t\t\t\t},{\n\t\t\t\t\talign : \"center\",\n\t\t\t\t\tvalue : moment().format(\"DD/MM/YYYY\")\n\t\t\t\t}]\n\t\t\t}]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :4, \n\t\t\t\t\ttext : [{ \n\t\t\t\t\t\talign : \"left\",\n\t\t\t\t\t\tvalue : \"Adresse : \"\n\t\t\t\t\t},{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : s(shop.address.street+\" \"+shop.address.number+\", \" + shop.address.zipcode + \" \" + shop.address.city).titleize()\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize :3, \n\t\t\t\t\ttext : [{ \n\t\t\t\t\t\talign : \"left\",\n\t\t\t\t\t\tvalue : \"Heures d√©placement : \"\n\t\t\t\t\t},{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : moment.duration(shop.timeDist, \"seconds\").humanize()\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :4, \n\t\t\t\t\ttext : [{ \n\t\t\t\t\t\talign : \"left\",\n\t\t\t\t\t\tvalue : \"Personne de contact : \"\n\t\t\t\t\t},{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : shop.contacts[0]\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}],\n\t\t\t\t\tborder : false\n\t\t\t\t}]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}],\n\t\t\t\t\tborder : false\n\t\t\t\t}]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}],\n\t\t\t\t\tborder : false\n\t\t\t\t}]\n\t\t})\n\t\t\n\t\t.template(\"newSection\", {})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Heures prest√©es par technicien\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :3, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"<b>Nom technicien</b>\"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize :2, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"<b>Heure arriv√©e</b>\"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize :2, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"<b>Heure d√©part</b>\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t\t\n\t\tvar scheduleLineCpt = 0;\n\t\twork.workers && work.workers.map(function(worker){\n\t\t\tworker.schedular.map(function(schedule, k ){\n\t\t\t\tscheduleLineCpt++;\n\t\t\t\tpdf.template(\"row\", {\n\t\t\t\t\tcontent : [{\n\t\t\t\t\t\tsize :3, \n\t\t\t\t\t\ttext : [{\n\t\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\t\tvalue : k === 0 ? s(worker.profile.firstname +\" \"+worker.profile.lastname).titleize().value() : \" - \"\n\t\t\t\t\t\t}]\n\t\t\t\t\t},{\n\t\t\t\t\t\tsize : 2, \n\t\t\t\t\t\ttext : [{\n\t\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\t\tvalue : moment(schedule.start).format(\"DD/MM HH:mm\")\n\t\t\t\t\t\t}]\n\t\t\t\t\t},{\n\t\t\t\t\t\tsize : 2, \n\t\t\t\t\t\ttext : [{\n\t\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\t\tvalue : moment(schedule.stop).format(\"DD/MM HH:mm\")\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tfor( ; scheduleLineCpt < 7 ; scheduleLineCpt ++){\n\t\t\tpdf.template(\"row\", {\n\t\t\t\tcontent : [{\n\t\t\t\t\tsize :3, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize : 2, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize : 2, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t\tpdf\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}],\n\t\t\t\t\tborder : false\n\t\t\t\t}]\n\t\t})\n\t\t.template(\"newSection\", {})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize : 7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Mat√©riaux\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize : 6, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\tbold : true,\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"<b>Description</b>\"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize : 1, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"<b>Quantit√©</b>\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tvar mattersLineCpt = 0;\n\t\twork.matters && work.matters.map(function(matter){\n\t\t\tmattersLineCpt ++;\n\t\t\tpdf.template(\"row\", {\n\t\t\t\tcontent : [{\n\t\t\t\t\tsize : 6, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : s(matter.name).titleize().value()\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize : 1, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : matter.quantity+\" \"+matter.unit\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t});\n\t\t});\n\t\tfor( ; mattersLineCpt < 7 ; mattersLineCpt ++){\n\t\t\tpdf.template(\"row\", {\n\t\t\t\tcontent : [{\n\t\t\t\t\tsize : 6, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize : 1, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\n\t\tpdf\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}],\n\t\t\t\t\tborder : false\n\t\t\t\t}]\n\t\t})\n\t\t\n\t\t.template(\"newSection\", {})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Travaux r√©alis√©es : constatation, cause, action prise, remarque\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\n\t\tvar wikisLineCpt = 0;\n\t\twikis.map(function(wiki){\n\t\t\twikisLineCpt++;\n\t\t\tpdf\n\t\t\t.template(\"row\", {\n\t\t\t\tcontent : [{\n\t\t\t\t\tsize : 7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"left\",\n\t\t\t\t\t\tvalue : wiki.description\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t});\n\t\t});\n\t\tfor( ; wikisLineCpt < 8 ; wikisLineCpt ++){\n\t\t\tpdf\n\t\t\t.template(\"row\", {\n\t\t\t\tcontent : [{\n\t\t\t\t\tsize : 7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n/*\n\t\tvar pictPerLine = 7 ; \n\t\tvar lines = pictures.length / pictPerLine;\n\n\t\tfor(var y = 0 ; y < lines ; y ++){\n\t\t\tpdf\n\t\t\t.template(\"row\", {\n\t\t\t\tcontent : [{\n\t\t\t\t\talign : \"center\",\n\t\t\t\t\tsize : 1, \n\t\t\t\t\timage : ( function(){\n\t\t\t\t\t\t\t\tvar images = []\n\t\t\t\t\t\t\t\tfor(var x = 0 ; x < pictPerLine ; x ++){\n\t\t\t\t\t\t\t\t\tvar id = x+(y*pictPerLine);\n\t\t\t\t\t\t\t\t\tif(id >=pictures.length )return images;\n\t\t\t\t\t\t\t\t\tvar src = pictures[id]\n\t\t\t\t\t\t\t\t\timages.push({\n\t\t\t\t\t\t\t\t\t\tsrc : _.isString(src) ? src : (process.env.PWD + \"/.uploads/\"+src.data.path)\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn images;\n\n\t\t\t\t\t\t\t})()\n\t\t\t\t}]\n\t\t\t})\n\t\t}*/\n\n\t\tpdf\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \" \"\n\t\t\t\t\t}],\n\t\t\t\t\tborder : false\n\t\t\t\t}]\n\t\t})\n\t\t\n\t\t.template(\"newSection\", {})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :7, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Signature pour accord heures, mat√©riaux, outillage\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t}).template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\t\tsize :3, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"left\",\n\t\t\t\t\t\tvalue : \"Client : \"\n\t\t\t\t\t},{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Nom + Signature\"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize :2, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Atelier du froid\"\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\tsize :2, \n\t\t\t\t\ttext : [{\n\t\t\t\t\t\talign : \"center\",\n\t\t\t\t\t\tvalue : \"Contr√¥le Management\"\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t\t.template(\"row\", {\n\t\t\tcontent : [{\n\t\t\t\talign : \"center\",\n\t\t\t\tsize : 3, \n\t\t\t\timage : [{\n\t\t\t\t\tsrc : process.env.PWD + \"/.uploads/\"+work.signatures.client.path\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\talign : \"center\",\n\t\t\t\tsize : 2, \n\t\t\t\timage : [{\n\t\t\t\t\tsrc : process.env.PWD + \"/.uploads/\"+work.signatures.adf.path\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\talign : \"center\",\n\t\t\t\tsize : 2, \n\t\t\t\timage : [{\n\t\t\t\t\tsrc : process.env.PWD+\"/programs/web.browser/app/images/ADF-management.png\"\n\t\t\t\t}]\n\t\t\t}]\n\t\t});\n\n\t\tpdf\n\t\t.end(function(file){\n\t\t\tWorks.update({\n\t\t\t\t_id:workId\n\t\t\t}, {\n\t\t\t\t$set : {\n\t\t\t\t\tsummary : file\n\t\t\t\t}\n\t\t\t})\n\t\t\tmyFuture.return(file);\n\t\t});\n\t\treturn myFuture.wait();\n\t}\n});"]}