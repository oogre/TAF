{"version":3,"sources":["meteor://ðŸ’»app/client/templates/shop/modules.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E","file":"/client/templates/shop/modules.js","sourcesContent":["\"use strict\";\n/*global _ : false */\n/*global Meteor : false */\n/*global Modules : false */\n/*global Session : false */\n/*global Template : false */\n\n\nTemplate.shopmodules.helpers({\n\tshopModules : function(){\n\t\tif(this.shop && this.shop.modules){\n\t\t\tvar shopId = this.shop._id;\n\t\t\treturn \t(this\n\t\t\t\t\t.shop\n\t\t\t\t\t.modules ||Â [])\n\t\t\t\t\t.map(function(module, key){\n\t\t\t\t\t\tmodule.key = key;\n\t\t\t\t\t\tmodule.shopId = shopId;\n\t\t\t\t\t\treturn module;\n\t\t\t\t\t});\n\t\t}\n\t}\n});\n\nTemplate.shopmodule.helpers({\n\tmodulOpen : function(){\n\t\treturn Session.get(Meteor.MODULE_OPEN) === this.key;\n\t},\n\tkey : function(){\n\t\treturn this.key;\n\t},\n\ttaskIds : function(){\n\t\tif(this.shop && !this.tasks){\n\t\t\treturn this.shop.modules[this.key].tasks;\n\t\t}\n\t},\n\tshowRemove : function(){\n\t\treturn !_.isArray(this.tasks);\n\t},\n\tselector : function(){\n\t\treturn JSON.stringify({\n\t\t\tshopId : this.shopId,\n\t\t\tmoduleId : this._id,\n\t\t\tkey : this.key\n\t\t});\n\t}\n});\n\nTemplate.shopmodule.events({\n\t\"click .module header\" : function(){\n\t\tif(Session.get(Meteor.MODULE_OPEN) === this.key){\n\t\t\tSession.set(Meteor.MODULE_OPEN, false);\n\t\t}\n\t\telse{\n\t\t\tSession.set(Meteor.MODULE_OPEN, this.key);\n\t\t}\n\t\treturn false;\n\t},\n\t\"blur #serial\" : function(event){\n\t\tMeteor.call(\"shopModuleUpdator\", this.shopId, this.key, {\n\t\t\tserial : event.target.value\n\t\t});\n\t\tSession.set(Meteor.MODULE_OPEN, false);\n\t}\n});\n\nTemplate.shopmodule.destroyed = function(){\n\tSession.set(Meteor.MODULE_OPEN, false);\n};"]}