{"version":3,"sources":["meteor://ðŸ’»app/client/templates/module/form.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/client/templates/module/form.js","sourcesContent":["\"use strict\";\n/*global _ : false */\n/*global $ : false */\n/*global Router : false */\n/*global Meteor : false */\n/*global Modules : false */\n/*global Template : false */\n\nTemplate.moduleform.rendered = function(){\n\t// initializes all typeahead instances\n\tMeteor.typeahead.inject();\n\t$(\".twitter-typeahead\").addClass(\"form-control\");\n};\n\nTemplate.moduleform.helpers({\n\ttypes : function(){\n\t\treturn \t_\n\t\t\t\t.chain(Modules.find().fetch())\n\t\t\t\t.groupBy(function(module){ \n\t\t\t\t\treturn module.type;\n\t\t\t\t})\n\t\t\t\t.keys()\n\t\t\t\t.value();\n\t}\n});\n\nTemplate.moduleform.events({\n\t\"click button[type='submit']\" : function(event, template){\n\t\tvar button = template.find(\"button[type='submit']\");\n\t\tvar errors = template.find(\".has-error\");\n\t\tvar _id = template.find(\"#_id\");\n\t\tvar name = template.find(\"#name\");\n\t\tvar type = template.find(\"#type\");\n\t\t\n\t\t$(errors)\n\t\t.removeClass(\"has-error\");\n\n\t\tvar validation = function(element){\n\t\t\tif(!element.value){\n\t\t\t\t$(element)\n\t\t\t\t.parent()\n\t\t\t\t.addClass(\"has-error\");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\t\n\t\tif( validation(name) || validation(type)){\n\t\t\treturn false;\n\t\t}\n\n\t\tvar data = {\n\t\t\tname : name.value.toLowerCase(),\n\t\t\ttype : type.value.toLowerCase()\n\t\t};\n\t\tvar next = function(error){\n\t\t\tif(error){\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$(button)\n\t\t\t\t.removeClass(\"btn-primary\")\n\t\t\t\t.addClass(\"btn-success\");\n\t\t\t\tRouter.go(\"module.index\");\n\t\t\t}\n\t\t};\n\n\t\tif(_id.value){\n\t\t\tMeteor.call(\"moduleUpdator\", _id.value, data, \"button[type='submit']\", next);\n\t\t}\n\t\telse{\n\t\t\tMeteor.call(\"moduleCreator\", data, \"button[type='submit']\", next);\n\t\t}\n\n\t\treturn false;\n\n\t}\n});\n"]}